from featureExtraction import extract_infos
import csv
import hashlib
import os, sys
import tkinter as tk
from tkinter import filedialog
def cutit(s,n):
   return s[n:]

def upload_file():
   if True:
    
    legitimate = 1
    print("Upload.....#######################################")
    # f = request.files['file']
    # f.save(secure_filename(f.filename))
    root = tk.Tk()
    root.withdraw()
    file_path = filedialog.askopenfilename()
    # file_path = 'Sublime_Text.exe'
    file_name = os.path.basename(file_path)
    tweet = file_path
    print("Tweats.....#######################################  " + tweet + "..#######################################")
     #########################################
    order,data = extract_infos(tweet)
    # print(data)
    # pe_features = map(lambda x: data[x], features)
    print('Features.....#######################################  ')
    j = 0
    with open('./data/data2.csv', mode='a') as data_file:
        data_writer = csv.writer(data_file, delimiter='|')
        data_list = []
        data_list.append(file_name)
        md5_value = hashlib.md5(tweet).hexdigest()
        data_list.append(md5_value)
        for i in order:
            print(i + ' : ' + str(data[i]))
            data_list.append(data[i])
            j = j+1
        data_list.append(legitimate)
        data_writer.writerow(data_list)
        print(data_list)
    print('..#######################################')
    print("Upload.....#######################################")
    


upload_file()
